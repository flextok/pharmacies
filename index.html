<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selwan Pharma (Pharmacy Locator)</title>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Poppins', sans-serif; 
            height: 100vh; 
            background: #E2E0C8; /* Beige background from branding */
            overflow: hidden; 
            transition: background 0.3s ease; 
        }
        #header { 
            background: linear-gradient(135deg, #5C7285, #81BC78); /* Dark blue-gray to green gradient */
            color: #ffffff; 
            padding: 20px; 
            display: flex; 
            justify-content: center; /* Center-align the logo */
            align-items: center; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); 
            z-index: 10; 
            position: relative; 
            height: 70px; /* Fixed header height */
        }
        #header .logo { 
            width: 100px; /* Larger logo for prominence, adjust as needed */
            height: auto; 
            margin: 0; /* Remove margin since it‚Äôs centered */
        }
        #toggle-theme { 
            background: rgba(255, 255, 255, 0.2); 
            border: none; 
            color: #ffffff; 
            padding: 8px 15px; 
            border-radius: 20px; 
            cursor: pointer; 
            font-size: 16px; 
            position: absolute; /* Position toggle to the right */
            right: 20px; /* Distance from the right edge */
            transition: transform 0.3s ease; 
        }
        #toggle-theme:hover { transform: scale(1.1); }
        #container { 
            display: flex; 
            height: calc(100% - 70px); /* Use percentage minus header height */
            overflow: hidden; 
            position: relative; 
            width: 100%;
        }
        #map { 
            flex: 3; 
            width: 100%; 
            height: 100%; /* Map takes full height on mobile */
            transition: height 0.3s ease; /* Smooth height transition */
        }
        #sidebar { 
            width: 100%; 
            max-width: 450px; 
            background: #ffffff; 
            padding: 25px; 
            overflow-y: auto; 
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.15); 
            z-index: 5; 
            transition: height 0.3s ease, transform 0.3s ease; /* Smooth height and transform transition */
            position: relative;
        }
        #sidebar-header {
            display: none; /* Hidden by default, shown on mobile */
            background: #81BC78; /* Green from branding */
            color: white; 
            padding: 10px; 
            text-align: center; 
            font-size: 16px; 
            font-weight: 600; 
            cursor: grab; /* Indicate draggable */
            border-radius: 10px 10px 0 0;
            margin-bottom: 10px;
            touch-action: none; /* Prevent default scrolling during drag */
        }
        #search-container { position: relative; margin-bottom: 20px; }
        #search { 
            width: 100%; 
            padding: 15px 50px 15px 20px; 
            border: none; 
            border-radius: 30px; 
            font-size: 16px; 
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); 
            transition: all 0.3s ease; 
        }
        #search:focus { outline: none; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); transform: scale(1.02); }
        #search-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #888; font-size: 18px; cursor: pointer; }
        #chain-filter { 
            width: 100%; 
            padding: 15px; 
            margin-bottom: 20px; 
            border: none; 
            border-radius: 30px; 
            font-size: 16px; 
            background: #f9f9f9; 
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); 
            cursor: pointer; 
            transition: all 0.3s ease; 
        }
        #chain-filter:hover { background: #e9ecef; }
        .branch { 
            padding: 20px; 
            margin-bottom: 15px; 
            background: #fff; 
            border-radius: 15px; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); 
            cursor: pointer; 
            transition: all 0.3s ease; 
            animation: slideIn 0.5s ease forwards; 
        }
        .branch:hover { transform: translateY(-5px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); }
        .branch h3 { margin: 0 0 8px; font-size: 20px; color: #5C7285; font-weight: 600; } /* Dark blue-gray */
        .branch p { margin: 5px 0; color: #7f8c8d; font-size: 14px; }
        .branch button { 
            background: linear-gradient(90deg, #81BC78, #40513B); /* Green to dark green gradient */
            color: white; 
            border: none; 
            padding: 8px 15px; 
            border-radius: 20px; 
            cursor: pointer; 
            font-weight: 600; 
            transition: transform 0.2s ease; 
        }
        .branch button:hover { transform: scale(1.05); }
        .nearest-branch { color: #81BC78; font-weight: 600; margin-bottom: 20px; font-size: 16px; animation: pulse 1.5s infinite; }
        .loading { text-align: center; padding: 30px; }
        .spinner { border: 5px solid #e9ecef; border-top: 5px solid #5C7285; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .error { text-align: center; padding: 20px; color: #e74c3c; font-weight: 600; }
        .dark-mode { background: #000000; color: #E2E0C8; } /* Black background, beige text */
        .dark-mode #sidebar { background: #1a1a1a; } /* Slightly lighter black */
        .dark-mode .branch { background: #2d2d2d; color: #E2E0C8; }
        .dark-mode .branch h3 { color: #E2E0C8; } /* Beige text in dark mode */
        .dark-mode .branch p { color: #d4d2bc; } /* Lighter beige for secondary text */
        .dark-mode .branch:hover { background: #3a3a3a; }
        .dark-mode #search { background: #1a1a1a; color: #E2E0C8; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); }
        .dark-mode #chain-filter { background: #1a1a1a; color: #E2E0C8; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); }
        .dark-mode #search-icon { color: #d4d2bc; }
        #welcome-screen { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, #5C7285, #81BC78); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            flex-direction: column; 
            z-index: 100; 
            animation: fadeOut 2s ease 2s forwards; 
        }
        #welcome-screen h2 { 
            color: white; 
            font-size: 48px; 
            font-weight: 800; 
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); 
            text-align: center; /* Ensure text is centered */
        }
        #welcome-screen p { 
            color: #E2E0C8; 
            font-size: 20px; 
            margin-top: 10px; 
            text-align: center; /* Ensure text is centered */
        }
        @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }
        .mapboxgl-popup-content { color: #000000 !important; } /* Black text for popup content */
        @media (max-width: 768px) { 
            #container { 
                flex-direction: column; 
                height: 100%; /* Ensure container takes full height */
            } 
            #map { 
                height: 100%; /* Map always takes full height on mobile */
                width: 100%;
            } 
            #sidebar { 
                max-width: 100%; 
                height: 100%; /* Full height on mobile by default */
                position: absolute; /* Position sidebar absolutely */
                bottom: 0; /* Stick to bottom */
                left: 0; /* Align to left */
                right: 0; /* Align to right */
                transform: translateY(0); /* Default position */
                z-index: 5; /* Ensure sidebar is above map */
                background: rgba(255, 255, 255, 0.95); /* Semi-transparent white background */
            }
            #sidebar.collapsed { 
                height: 60px; /* Collapsed height */
                transform: translateY(calc(100% - 60px)); /* Slide down, showing only 60px */
                overflow: hidden; /* Hide overflow when collapsed */
                padding: 10px; /* Reduced padding when collapsed */
                background: rgba(255, 255, 255, 0.95); /* Semi-transparent background */
            }
            #container.collapsed #map { 
                height: 100%; /* Map remains full height */
            }
            #sidebar-header { 
                display: block; /* Show draggable header on mobile */
            }
            #header .logo { width: 80px; } /* Larger logo on mobile for visibility */
            #toggle-theme { right: 15px; } /* Adjust toggle position on mobile */
            #welcome-screen h2, #welcome-screen p { 
                text-align: center; /* Ensure centered text on mobile */
            }
        }
        /* Location marker styles */
        .mapboxgl-marker { 
            background-image: url('data:image/svg+xml;charset=utf-8,<svg width="24" height="36" viewBox="0 0 24 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.383 0 0 5.383 0 12c0 6.617 5.383 12 12 12s12-5.383 12-12c0-6.617-5.383-12-12-12zm0 18c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z" fill="%23A9D9A4"/><path d="M12 4c-3.313 0-6 2.687-6 6 0 3.313 2.687 6 6 6s6-2.687 6-6c0-3.313-2.687-6-6-6z" fill="#FFFFFF"/><circle cx="12" cy="10" r="2" fill="%23A9D9A4"/></svg>'); 
            background-size: cover; 
            width: 24px; 
            height: 36px; 
            cursor: pointer; 
        }
    </style>
</head>
<body>
    <div id="welcome-screen">
        <h2>Selwan Pharma</h2>
        <p>Your Pharmacy Locator</p>
    </div>
    <div id="header">
        <img src="https://flextok.github.io/pharmacies/logo%20selwan%202nd.png" alt="Selwan Pharma Logo" class="logo">
        <button id="toggle-theme">üåô</button>
    </div>
    <div id="container">
        <div id="map"></div>
        <div id="sidebar">
            <div id="sidebar-header">Drag to Expand/Collapse</div>
            <div id="search-container">
                <input id="search" type="text" placeholder="Search pharmacies..." aria-label="Search pharmacies">
                <span id="search-icon">üîç</span>
            </div>
            <select id="chain-filter" aria-label="Filter by pharmacy chain">
                <option value="all">All Chains</option>
            </select>
            <div id="nearest-branch" class="nearest-branch"></div>
            <div id="branch-list"></div>
            <div id="loading" class="loading"><div class="spinner"></div></div>
            <div id="error" class="error" style="display: none;"></div>
        </div>
    </div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoicGF2bHlkb3NzMTQzIiwiYSI6ImNtNjg5YzRyczAxNGYyaXMzZnI0bGs4YXUifQ.2sW84f1DmD4njKAti-Y1rg';

        const branches = [
            { name: "Doss Zaitoun", address: "Tomanaby, Cairo", coordinates: [31.314732, 30.103183] },
            { name: "Doss Tayaran", address: "101 El Tayaran St, El-Tawfik, Nasr City, Cairo Governorate 4451015", coordinates: [31.324216, 30.071265] },
            { name: "Doss Almaza", address: "40 Almaza Street, Almazah, Heliopolis, Cairo Governorate 4461135", coordinates: [31.346090, 30.085298] },
            { name: "Doss Al Daher", address: "4 Mahmoud Fahmy Al-Mamari, Al-Sakakini, Al-daher District, Cairo Governorate", coordinates: [31.265671615903713, 30.06258206699227] },
            { name: "Doss Al Shams", address: "97 Mohamed Farid, Airport, Qesm El-Nozha, Cairo Governorate 4470352", coordinates: [31.34333047357388, 30.114331202940114] },
            { name: "Doss Hadaek Al Koba", address: "88 Ahmed Zaki, Private, Hadayek El-Kobba Department, Cairo Governorate 4381605", coordinates: [31.280367447413482, 30.079240742949747] },
            { name: "Doss Hamamat Al Koba", address: "20-29 Dar Al-Salaam, Al-Zaytoun Al-Sharqiya, Al-Zaytoun District, Cairo Governorate 4520121", coordinates: [31.297306868633168, 30.08972795892963] },
            { name: "Doss Al Mahkama", address: "483G+C72, Atef Bey Barakat, Al-Bustan, Heliopolis District, Cairo Governorate 4460153", coordinates: [31.325569773574145, 30.103702386163196] },
            { name: "Doss Maryland", address: "23 El-Higaz, Al-Montazah, Heliopolis District, Cairo Governorate 4460223", coordinates: [31.320195477569477, 30.097117774773082] },
            { name: "Doss Sheraton", address: "24 Sayed Zakareya, Sheraton Airport, Qesm El-Nozha, Cairo Governorate", coordinates: [31.3733887735741, 30.102984622754747] },
            { name: "Doss Saray Al Koba", address: "17 Bani Tai, Al-Zaytoun Al-Sharqiya, Qism Al-Zaytoun, Cairo Governorate", coordinates: [31.305036860374365, 30.09326805006896] },
            { name: "Doss Nasr City", address: "Makram Ebeid Street, Sixth District, Nasr City Department, Cairo Governorate", coordinates: [31.345862473575238, 30.058500696785725] },
            { name: "Doss New Cairo", address: "3 Skies Plaza South 90 street, New Cairo", coordinates: [31.495873973575932, 30.026518515330608] },
            { name: "Dair Elmalak", address: "23 Sharae Zarafet Al-Gabal, near Dair El-Malak Church", coordinates: [31.271663026998677, 30.080960692622618] },
            { name: "Bait Al Aiz", address: "35 Ibn Al-Hakam Square, Tomanaby, Zaitoun", coordinates: [31.319862184428445, 30.11031524289574] },
            { name: "Doss Diplomats", address: "New Cairo 1, Cairo Governorate", coordinates: [31.440293998128208, 29.993664906918173] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÑÿπŸÖÿßŸàŸä", address: "ÿ∑ÿ±ŸäŸÇ ÿßŸÑŸÅŸäŸÑÿßÿ™ ŸÇÿ®ŸÑ ÿ∑ÿ±ŸäŸÇ ÿßŸÑÿØÿßÿ¶ÿ±Ÿä ÿßŸÑÿßŸÇŸÑŸäŸÖŸä - ÿ®ŸÜŸáÿß", coordinates: [31.17285019679927, 30.47115365374199] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ŸáÿßŸÜŸâ ÿπÿ®ÿØ ÿßŸÑÿ∏ÿßŸáÿ±", address: "ÿ®ÿ±ÿ¨ ŸÉÿßÿ±ŸÅŸàÿ± ŸÜÿßÿ≤ŸÑŸá ŸÉŸàÿ®ÿ±Ÿâ ÿπÿ±ÿßÿ®Ÿâ", coordinates: [31.249776916846326, 30.122845497161443] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÖÿ≠ŸÖÿØ ÿßŸÑÿ¥ÿ±ŸäŸÅ", address: "ÿ≠Ÿàÿ∂ ÿßŸÑÿπŸÖÿØŸá ÿßŸÖÿßŸÖ ÿ≥ŸÜÿ™ÿ± ÿπÿ®ÿØÿßŸÑŸÑŸá ÿ¥ÿ®ÿ±ÿß ÿßŸÑÿÆŸäŸÖÿ©", coordinates: [31.243639819930525, 30.134480118939983] },
            { name: "leen store", address: "ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ¨ŸÖŸáŸàÿ±Ÿäÿ© ÿ®ÿ¨Ÿàÿßÿ± ŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑÿµŸÅÿß ÿßŸÑŸÖÿ≠ŸÖÿØŸä - ŸÖÿ≠ÿ∑Ÿá ÿßŸÑŸÅŸÉŸáÿßŸÜŸä - ÿßŸÑŸÇŸÑÿ¨", coordinates: [31.349923696547883, 30.17990551178345] },
            { name: "ÿßŸÑÿ≠Ÿàÿ™", address: "ÿ®ÿ±ÿ¨ ŸÖÿ≥ÿ¨ÿØ ÿßŸÑÿ≥ÿßÿØÿßÿ™ ÿ≠ÿØÿßÿ¶ŸÇ ÿßŸÑŸÇÿ®ÿ© . ÿ±ŸÇŸÖ 210", coordinates: [31.29060494469495, 30.08590755960474] },
            { name: "ÿßŸàÿ±Ÿäÿ¨ŸäŸÜÿßŸÑ ŸÖŸäÿ¨ÿß ÿ≥ÿ™Ÿàÿ±", address: "ÿßŸÑŸÖŸàÿ≥ŸÉŸä - ÿßŸÑŸÇÿßŸáÿ±ÿ©", coordinates: [31.256328084841787, 30.051054493997505] },
            { name: "ÿßŸàŸÑÿßÿØ ŸáŸÜÿØŸä", address: "10ÿ¥ ÿ≠ÿØÿßÿ¶ŸÇ ÿßŸÑŸÇÿ®ÿ© ÿÆŸÑŸÅ ŸÇÿ≥ŸÖ ÿßŸÑÿ≠ÿØÿßÿ¶ŸÇ", coordinates: [31.282729854216292, 30.094610352396344] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÑÿ®ŸÇŸÑÿßŸàŸä", address: "ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÜÿµÿ± ÿßŸÑŸÖÿπÿßÿØŸä", coordinates: [31.277043666683607, 29.977538587979073] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿßÿ≤Ÿáÿßÿ±", address: "ÿ¥ÿßÿ±ÿπ ÿ≠ŸÜŸäŸÜ ÿßÿ®ŸÜ ÿßÿ≥ÿ≠ÿßŸÇ ÿÆŸÑŸÅ ÿßŸÑÿ≠ÿØŸäŸÇÿ© ÿßŸÑÿØŸàŸÑŸäÿ© -ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ±", coordinates: [31.340029971718323, 30.04857246485963] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿØ ŸÖÿ≠ŸÖÿØ ÿπŸÑŸä", address: "ÿ≠ÿØÿßÿ¶ŸÇ ÿßŸÑŸÇÿ®ÿ© ÿßŸÖÿßŸÖ ÿßŸÑŸàŸáÿßÿ® ŸÖŸàÿ™Ÿàÿ±ÿ≤", coordinates: [31.31797532875599, 30.117668165299968] },
            { name: "ÿ®ÿßŸÜŸàÿ±ÿßŸÖÿß ÿßŸÑÿ≤ÿ∫ÿßŸà", address: "ÿßŸÑŸÖŸàÿ≥ŸÉŸä - ÿßŸÑŸÇÿßŸáÿ±ÿ©", coordinates: [31.25844943458138, 30.064254273840508] },
            { name: "ŸÖŸäÿÆÿß ŸÉŸàÿ≤ŸÖÿ™ŸÉÿ≥", address: "ÿπŸäŸÜ ÿ¥ŸÖÿ≥ ÿ¥ ÿßŸÑÿ≤Ÿáÿ±ÿßÿ°", coordinates: [31.322918589281095, 30.13251751372593] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÑÿπŸäŸÜ", address: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÑÿπŸäŸÜ", coordinates: [31.196868210035092, 30.054794800235232] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿ®ÿØŸäÿ±", address: "ÿ±ŸÇŸÖ 77 ÿ¥ÿßÿ±ÿπ ÿπŸäŸÜ ÿ¥ŸÖÿ≥ ŸÜÿßÿµŸäÿ© ÿßÿ≠ŸÖÿØ ÿπÿµŸÖÿ™", coordinates: [31.319757654217252, 30.125599147885932] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿ≠ÿ≥ŸäŸÜ ŸÖÿ≥ŸÑŸÖ", address: "ÿ®ÿ¨Ÿàÿßÿ± ŸÖÿ≥ÿ™ÿ¥ŸÅŸâ ÿßŸÑÿ±ÿ∂ŸàÿßŸÜ ÿπŸäŸÜ ÿ¥ŸÖÿ≥", coordinates: [31.33822192958943, 30.131342663435717] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿπÿßÿ®ÿØŸäŸÜ", address: "ÿ®ÿ¨Ÿàÿßÿ± ÿ®ŸÜŸÉ QNP ÿ¥ ÿßŸÑŸáÿ±ŸÖ ÿ®ÿ¨Ÿàÿßÿ±", coordinates: [31.14502687521917, 30.00570360812401] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿπÿßŸÖÿ±", address: "ÿßŸÑÿ≥ÿ±ÿßÿ¨ ŸÖŸàŸÑ - ŸÖÿØŸäŸÜŸá ŸÜÿµÿ±", coordinates: [31.356595176428375, 30.051341341405525] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ŸÅÿ±ŸäÿØ ÿ¥ŸàŸÇŸä", address: "ÿ¥ÿßÿ±ÿπ 15 ŸÖÿßŸäŸà ÿßŸÖÿßŸÖ ŸÖÿ≥ÿ™ÿ¥ŸÅŸä ŸÖÿ≠ŸÖÿØ ÿπÿ®ÿØŸá ÿ¥ÿ®ÿ±ÿß ÿßŸÑÿÆŸäŸÖÿ©", coordinates: [31.259363146126347, 30.12400339272157] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ŸÑŸäŸÑŸá", address: "ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ∑Ÿäÿ±ÿßŸÜ ÿ≠Ÿâ ÿßŸÑÿ≥ŸÅÿßÿ±ÿßÿ™", coordinates: [31.337550288072155, 30.037490818224573] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ŸÖÿ≠ŸÖÿØ ÿ≠ÿ≥ŸÜ", address: "ÿ¥ ŸÖÿ≠ŸÖÿØ ŸÜÿ¨Ÿäÿ® ÿßŸÑŸÖÿ±ÿ¨", coordinates: [31.33607089593054, 30.152754367106095] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßÿ≠ŸÖÿØ ÿ≠ÿ≥ŸÜ", address: "ÿßŸÖÿßŸÖ ŸÖÿ≥ÿ¨ÿØ ÿßŸÑÿ±ÿ¥ÿØÿßŸÜ ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ±", coordinates: [31.304762096391975, 30.068308135786392] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿ≤ÿ∫ÿ®Ÿä", address: "11432 ÿ¥ÿßÿ±ÿπ ÿπÿ®ÿßÿØ ÿßŸÑÿπŸÇÿßÿØ ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ±", coordinates: [31.338146323819092, 30.055021393633762] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑŸÇŸÜÿßÿπÿ©", address: "ÿ¥ÿßÿ±ÿπ ŸÖÿÆŸÑÿµ ŸÖŸÜ ÿ¥ÿßÿ±ÿπ ÿßÿ≥ŸÖÿßÿπŸäŸÑ ÿßŸÑŸÇÿ®ÿßŸÜŸä - ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ±", coordinates: [31.32907103224979, 30.05852838036744] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑŸÖŸäÿØÿßŸÜ", address: "9 ÿ¥ÿßÿ±ÿπ ŸÖŸäÿØÿßŸÜ ÿßŸÑŸÖŸÅÿßÿ±ŸÇ ÿ®ÿ±ÿ¨ ÿßŸÑÿßÿ∑ÿ®ÿßÿ° ÿ®ÿ¨Ÿàÿßÿ± ŸÇÿ≥ŸÖ ÿßŸÑŸÖŸÇÿ∑ŸÖ", coordinates: [31.32891968807288, 30.011900814270696] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿµŸÑÿßÿ≠ ÿßŸÑÿØŸäŸÜ", address: "40 ÿ¥ÿßÿ±ÿπ ÿ®ÿßÿ®ŸÑ ÿπŸÖÿ± ÿµÿØŸÇŸä ÿßŸÑÿØŸÇŸä ŸÖÿ≠ÿßŸÅÿ∏ÿ© ÿßŸÑÿ¨Ÿäÿ≤ÿ©", coordinates: [31.202703380128014, 30.04271683659131] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÖŸäÿ±ÿß ŸÖÿ¨ÿØŸä", address: "ŸÖŸäÿØÿßŸÜ ÿßŸÑÿ≠ÿ¨ÿßÿ≤ ÿ®ÿ¨Ÿàÿßÿ± coc ŸÑŸÑŸÜÿ∏ÿßÿ±ÿßÿ±ÿ™", coordinates: [31.344090466745616, 30.10961265646186] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿ¨ÿßÿ±ÿØŸÜ ÿ≥Ÿäÿ™Ÿä", address: "40 ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÇÿµÿ± ÿßŸÑÿπŸäŸÜŸä .", coordinates: [31.232435972729625, 30.032038478695952] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿπÿ≤ÿßŸÑÿØŸäŸÜ (ÿßŸÑÿ±ÿ≠ÿßÿ®)", address: "289ŸÖŸÖÿ± ÿßŸÑÿ¥ÿßŸÜÿ≤ŸÑŸäÿ≤ŸäŸá ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿâ ÿßŸÑÿ±ÿ≠ÿßÿ®", coordinates: [31.49231584222057, 30.056098503066963] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿπŸàÿ∂Ÿä", address: "ÿ¥ÿßÿ±ÿπ ÿÆŸÑŸäŸÅÿ© ÿßŸÑŸÖÿ£ŸÖŸàŸÜ - ÿßŸÖÿßŸÖ ÿ≥ŸàŸÇ ÿßŸÑÿπÿµÿ± - ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©", coordinates: [31.30926323409841, 30.087414972875028] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ŸÑÿßŸäŸÅ", address: "10ÿ¥ÿßÿ±ÿπ ÿπÿ®ÿØÿßŸÑŸÑŸá ÿ®ŸÜ ÿ∑ÿßŸáÿ± ŸÖŸÜ ŸÖŸÉÿ±ŸÖ ÿπÿ®ŸäÿØ ŸÖ ŸÜÿµÿ±", coordinates: [31.343732880628753, 30.06289684437156] },
            { name: "ÿßŸÑÿ≠ŸÉŸäŸÖ ÿ≥ÿ™Ÿàÿ±", address: "9 ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ≠ŸÉŸäŸÖ ŸÖÿ™ŸÅÿ±ÿπ ŸÖŸÜ ÿ¥ÿßÿ±ÿπ ÿ≥ÿπÿØ ÿ≤ÿ∫ŸÑŸàŸÑ ÿßŸÑÿ¨Ÿäÿ≤ÿ©", coordinates: [31.21314237370612, 30.014569094422516] },
            { name: "ÿ™ŸàŸÜ ÿ™ŸàŸÜ (ŸÅÿ±ÿπ ŸÅŸäÿµŸÑ)", address: "ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ", coordinates: [31.160610687665294, 29.993281331992723] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿ®Ÿä ŸàŸäŸÑ", address: "ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ", coordinates: [31.157776192163432, 29.98177326820458] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿ±ÿ®Ÿäÿπ", address: "ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ", coordinates: [31.175699490318248, 30.01250928899951] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÑÿ±ÿ≠ÿßÿ®", address: "ÿßÿÆÿ± ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ ÿßŸÖÿßŸÖ ŸÖÿ≥ÿ¨ÿØ ÿπÿ®ÿßÿØ ÿßŸÑÿ±ÿ≠ŸÖŸÜ", coordinates: [31.13521029248713, 29.993591183587895] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÑŸàŸÑŸäÿØ", address: "ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ", coordinates: [31.151298002761543, 29.99649820849074] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿØ ÿßÿ≠ŸÖÿØ ÿµŸÑÿßÿ≠", address: "ÿßŸàŸÑ ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ", coordinates: [31.19172426282921, 30.022582868358672] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿ®ÿ±ÿ¨ ŸÖÿµÿØŸÇ", address: "ÿ¥ÿßÿ±ÿπ ŸÖÿµÿØŸÇ ÿßŸÑÿØŸÇŸä", coordinates: [31.206217686222246, 30.039722033627122] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿØ . ÿßŸÖŸÜŸäÿ©", address: "6 ÿ¥ÿßÿ±ÿπ ŸÖÿ™ŸàŸÑŸä ÿßŸÑÿ¥ÿπÿ±ÿßŸàŸä - ÿßŸÑŸÑÿ®ŸäŸÜŸä ŸÅŸàŸÇ ŸÜŸÅŸÇ ÿßŸÑŸÖÿ±ŸäŸàÿ∑Ÿäÿ© - ÿßŸÑÿ¨Ÿäÿ≤ÿ©", coordinates: [31.14492879496983, 29.99722226248965] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿØ . ÿ®Ÿäÿ¥ŸàŸä ÿµÿßŸÅŸä", address: "ÿßŸàŸÑ ÿ¥ÿßÿ±ÿπ ÿßŸÑÿπÿ¥ÿ±ŸäŸÜ ŸÅŸäÿµŸÑ", coordinates: [31.185474573706106, 30.009669733901497] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿßÿ° Ÿà ŸÜÿ¨ŸÑÿßÿ°", address: "ÿ¥ ŸÉÿπÿßÿ®Ÿäÿ¥ ŸÅŸäÿµŸÑ", coordinates: [31.150842557388028, 30.002057212994405] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿ¨Ÿäÿ≤ÿ© ÿßŸÑŸÉÿ®ÿ±Ÿä", address: "ŸÖŸäÿØÿßŸÜ ÿßŸÑÿ¨Ÿäÿ≤ÿ©", coordinates: [31.209157538429636, 30.015812853400472] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿ¥ÿßÿ∞ŸÑŸä", address: "18 ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÖŸÑŸÉ ŸÅŸäÿµŸÑ", coordinates: [31.19694418676582, 30.057634278590022] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿµÿ≠Ÿá Ÿà ÿßŸÑÿ¨ŸÖÿßŸÑ", address: "ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ÿ®ÿ¨Ÿàÿßÿ± ÿ≥Ÿàÿ®ÿ± ÿ¨ŸäŸÖ", coordinates: [31.157462187646814, 30.004080787835118] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑŸÅŸäÿ¥ÿßŸàŸä", address: "ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä - ÿßŸÖÿßŸÖ ÿπÿßŸÑŸÖ ÿßŸÑÿ¥ŸÜÿ∑", coordinates: [31.162682830402094, 29.999444871214287] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿ≠Ÿàÿßÿ≥", address: "ÿ¥ÿßÿ±ÿπ ŸÅŸäÿµŸÑ", coordinates: [31.20075188622325, 30.014337606898195] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿÆÿßŸÑÿØ ÿ≠ÿ¨ÿ±", address: "ÿ¥ ÿßŸÑÿ®ŸàŸáŸâ ÿ®ÿ¨Ÿàÿßÿ± ÿ¥ ÿßŸÑÿ¨ÿßŸÖÿπ ŸÅŸäÿµŸÑ", coordinates: [31.212509034789907, 30.08707966205799] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿØ . ÿ¨ÿßÿ®ÿ±", address: "ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÇŸàŸÖŸäÿ© ÿ®ÿ¨Ÿàÿßÿ± ŸÖÿ≠ŸÑ ÿßŸÖ ÿßŸÑŸÜŸàÿ± ÿßŸÖÿ®ÿßÿ®ÿ©", coordinates: [31.207874206828865, 30.09493873595587] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿØ ŸÜÿßÿ¨Ÿä", address: "32 ÿ¥ÿßÿ±ÿπ ÿßŸÑÿØŸÇŸä", coordinates: [31.213024076998746, 30.039957973022485] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿ¥ÿ±ŸäŸÅ", address: "10 ÿ¥ÿßÿ±ÿπ ŸÖŸäÿØÿßŸÜ ÿßŸÑŸÖÿ≥ÿßÿ≠ÿ© ÿßŸÖÿßŸÖ ŸÅŸÜÿØŸÇ ÿ≥ŸÅŸäÿ± ÿßŸÑÿØŸÇŸä .", coordinates: [31.21199413782278, 30.039053507699233] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿπÿßÿØŸÑ", address: "ÿßŸàŸÑ ŸÅŸäÿµŸÑ ÿÆŸÑŸÅ ÿ®ÿ±ÿ¨ ÿßŸÑÿßÿ∑ÿ®ÿßÿ°", coordinates: [31.200393056195217, 30.014595380193576] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÅÿ™ÿ≠ ÿßŸÑŸÑŸá", address: "32 ÿ¥ÿßÿ±ÿπ ÿ¨ŸàŸÑ ÿ¨ŸÖÿßŸÑ ŸÖÿ™ŸÅÿ±ÿπ ŸÖŸÜ ÿßŸÑÿ®ÿ∑ŸÑ ÿßÿ≠ŸÖÿØ ÿπÿ®ÿØ ÿßŸÑÿπÿ≤Ÿäÿ≤ ÿßŸÑŸÖŸáŸÜÿØÿ≥ŸäŸÜ", coordinates: [31.20765281325198, 30.060308545195248] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÅÿ™ÿ≠Ÿä", address: "ÿ¥ÿßÿ±ÿπ ÿßŸÑŸàÿ≠ÿØŸá ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ÿ®ÿ¨Ÿàÿßÿ± ÿ®Ÿä ÿ™ŸÉ Ÿà ŸÉÿ¥ÿ±Ÿä ÿßŸÑÿ±ÿ≠ŸÖÿßŸÜŸä", coordinates: [31.198266732249017, 30.079590222861945] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÖÿµÿ∑ŸÅŸä ÿßŸÑÿ¨ÿØŸäÿØŸá", address: "ÿ™ÿ≠ÿ™ ŸÉŸàÿ®ÿ±Ÿä ŸÅŸäÿµŸÑ ÿπŸÑŸä ÿßŸÑŸäŸÖŸäŸÜ", coordinates: [31.200205519734165, 30.01736896745989] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÖŸäÿ±ÿß ŸÖÿ≥ÿπŸàÿØ", address: "ÿ®ÿ±ÿ¨ ÿØ ÿπŸÑŸä ÿßŸÑÿØŸäŸÜ ŸÖŸäÿØÿßŸÜ ÿßŸÑÿ≠ÿµÿ±Ÿä 6 ÿßŸÉÿ™Ÿàÿ®ÿ±", coordinates: [30.96503646108761, 29.993111588088432] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÜŸàÿ± ÿßŸÑÿßÿ≥ŸÑÿßŸÖ", address: "35 ÿ¥ÿßÿ±ÿπ ÿ®ÿ¥ÿ™ŸäŸÑ ÿßŸÑŸÖŸÜŸäÿ±ÿ© ÿßŸÑÿ∫ÿ±ÿ®Ÿäÿ© ÿßŸÖÿ®ÿßÿ®Ÿá", coordinates: [31.199485026700042, 30.076476870671545] },
            { name: "ÿµŸäÿØŸÑŸäŸá Ÿäÿßÿ≥ÿ± ÿ¥ÿ®ÿßŸÜÿ©", address: "ÿ¥ ÿßŸÑŸÖÿ≠ÿ±Ÿàÿ≥ÿ© ŸÖÿ™ŸÅÿ±ÿπ ŸÖŸÜ ÿπŸÖÿ± ÿ∑Ÿàÿ≥ŸàŸÜ ÿßŸÑÿ¨Ÿäÿ≤ÿ©", coordinates: [31.208121372728677, 30.0629348273761] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿ≥ÿßÿ±Ÿá ÿßŸÑÿπÿ¨ÿ±ŸÖŸä", address: "ÿ¥ÿßÿ±ÿπ ŸÉÿπÿ®Ÿäÿ¥ ÿßŸÑÿ∑Ÿàÿßÿ®ŸÇ ŸÇŸäÿµŸÑ", coordinates: [31.146201854132247, 30.003039965792805] },
            { name: "ÿßŸàÿ±ÿ¨ŸäŸÜÿßŸÑ ÿ≥ÿ™Ÿàÿ±- ÿπŸäŸÜ ÿ¥ŸÖÿ≥", address: "ÿ¥ÿßÿ±ÿπ ÿßÿ≠ŸÖÿØ ÿπÿµŸÖÿ™ ÿßŸÖÿßŸÖ ÿ¥ ŸÖÿ≠ŸÖÿØ ÿ±ÿ¥ÿßÿØ ÿπŸäŸÜ ÿ¥ŸÖÿ≥", coordinates: [31.336028455478502, 30.124894002279333] },
            { name: "ÿ™ŸàŸÜ ÿ™ŸàŸÜ (ŸÅÿ±ÿπ ÿßŸÑÿ≤Ÿäÿ™ŸàŸÜ)", address: "ÿ¥ÿßÿ±ÿπ ÿ∑ŸàŸÖÿßŸÜÿ®ÿßŸä ÿßŸÑÿ≤Ÿäÿ™ŸàŸÜ", coordinates: [31.318515759234106, 30.107977045549312] },
            { name: "ÿ™ŸàŸÜ ÿ™ŸàŸÜ (ŸÅÿ±ÿπ ŸÖÿØŸäŸÜŸá ŸÜÿµÿ±)", address: "ÿßŸàŸÑ ÿ¥ÿßÿ±ÿπ ÿπÿ®ÿßÿ≥ ÿßŸÑÿπŸÇÿßÿØ ŸÖÿØŸäŸÜŸá ŸÜÿµÿ±", coordinates: [31.337405951554352, 30.058200480998867] },
            { name: "ÿ≥ÿßŸÜ ÿ®ŸàŸÑÿß ÿ¨ŸÖŸÑÿ©", address: "ÿ¥ÿßÿ±ÿπ ÿ™ÿ±ÿπÿ© ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑÿ≤Ÿäÿ™ŸàŸÜ", coordinates: [31.31270329432191, 30.11122270839167] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÉÿ±ŸÖ", address: "9ÿ¥ ÿ≠ÿ≥ŸäŸÜ ÿ¥ŸÅŸäŸÇ ÿßŸÑŸÖÿµÿ±Ÿâ ÿßŸÑŸÜÿ≤Ÿáÿ© ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©", coordinates: [31.35072920526177, 30.118397103388666] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿßŸÑŸáŸÑÿßŸÑ", address: "ŸÖŸÉÿ±ŸÖ ÿπÿ®ŸäÿØ - ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ± .", coordinates: [31.344602205263673, 30.06441823961536] },
            { name: "ÿµŸäÿØŸÑŸäÿßÿ™ ÿ≤ŸÉÿ±Ÿä", address: "1 ÿ¥ ÿ±ÿ¥ÿØŸä ŸÖŸäÿØÿßŸÜ ÿ≥ŸÅŸäÿ± ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©", coordinates: [31.337534703412754, 30.097281998273186] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßÿ®Ÿàÿ≥ŸÖÿ®ŸÑ", address: "ÿ¥ ÿßÿ®Ÿà ÿ≥ŸÖÿ®ŸÑ ÿßŸÖÿßŸÖ ÿ≠ŸÑŸàÿßŸÜŸä ŸÜÿßÿ®ŸàŸÑŸä ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØŸá", coordinates: [31.326826018755277, 30.100928886796776] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÅÿ±ŸäŸÇŸäÿß", address: "45 ÿ¥ÿßÿ±ÿπ ŸÖŸÉÿ±ŸÖ ÿπÿ®ŸäÿØ - ŸÖÿØŸäŸÜŸá ŸÜÿµÿ±", coordinates: [31.345882891770763, 30.060278062052387] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿßŸÜÿØŸÑÿ≥", address: "11 ÿ¥ÿßÿ±ÿπ ÿßŸÑÿßŸÜÿØŸÑÿ≥ ÿÆŸÑŸÅ ÿßŸÑŸÖŸäÿ±ŸäŸÑÿßŸÜÿØ ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØŸá", coordinates: [31.315587230398826, 30.09797029762661] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿ®ÿ±ŸÑÿ≥Ÿä", address: "ÿ¥ÿßÿ±ÿπ ÿßÿ®ÿ±ÿßŸáŸäŸÖ ÿßŸÑŸÑŸÇÿßŸÜŸä ÿ™ŸÇÿßÿ∑ÿπ ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ∑Ÿäÿ±ÿßŸÜ ÿßŸÖÿßŸÖ ŸÖÿ≥ÿ™ÿ¥ŸÅŸä ÿ™ÿßŸÖŸäŸÜ ÿßŸÑÿµÿ≠Ÿä ŸÖÿØŸäŸÜŸá ŸÜÿµÿ±", coordinates: [31.326625450853133, 30.05865599298651] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑÿ¨ÿßŸÖÿπ", address: "68 ÿ¥ÿßÿ±ÿπ ÿØŸÖÿ¥ŸÇ ŸÖŸäÿØÿßŸÜ ÿßŸÑÿ¨ÿßŸÖÿπ ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØŸá", coordinates: [31.32789229271624, 30.10026036663823] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑŸÉŸàÿ´ÿ±", address: "42ÿ¥ ÿßÿ≠ŸÖÿØ ŸÅÿÆÿ±Ÿä ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ±", coordinates: [31.349679693892842, 30.064344475209236] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑŸÖÿßÿ≥ÿ©", address: "ÿ¥ ÿßŸÑŸÖÿØŸäŸÜŸá ÿßŸÑŸÖŸÜŸàÿ±ÿ© ÿßŸÑŸÜÿ≤Ÿáÿ© ÿßŸÑÿ¨ÿØŸäÿØŸá", coordinates: [31.32541548277054, 30.106644345344574] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿ≠ÿßÿ™ŸÖ ÿµŸÑÿßÿ≠ ÿßŸÑÿØŸäŸÜ", address: "ÿ™ŸÇÿßÿ∑ÿπ ÿ¥ÿßÿ±ÿπ ÿπÿ®ÿßÿ≥ ÿßŸÑÿπŸÇÿßÿØ ŸÖÿπ ŸÖÿµÿ∑ŸÅŸä ÿßŸÑŸÜÿ≠ÿßÿ≥ ŸÖÿØŸäŸÜŸá ŸÜÿµÿ±", coordinates: [31.338910045742956, 30.05377869470995] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿ¥ÿ±ŸÅ", address: "ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ≠ÿ¨ÿßÿ≤ ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©", coordinates: [31.363431881054805, 30.182745411939354] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿπŸäÿ≥Ÿä", address: "4 ÿ¥ ÿßŸÅŸÑÿßÿ∑ŸàŸÜ ÿßÿ±ÿ∂ ÿßŸÑÿ¨ŸàŸÑŸÅ", coordinates: [31.33323429377417, 30.12391258089944] },
            { name: "ÿµŸäÿØŸÑŸäŸá ÿßŸÑŸÜŸäŸÑ", address: "ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ™ÿ±ÿπÿ© ÿßŸÑÿ®ŸàŸÑÿßŸÇŸäÿ© ÿ¥ÿ®ÿ±ÿß - ŸÖÿµÿ±", coordinates: [31.245669686221625, 30.066269732416266] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸÉŸÖÿßŸÑ", address: "184 ÿ¥ ÿßŸÑÿ™ÿ≠ÿ±Ÿäÿ± - ÿ®ÿßÿ® ÿßŸÑŸÑŸàŸÇ", coordinates: [31.242283605264326, 30.04456198416688] },
            { name: "ÿµŸäÿØŸÑŸäŸá ŸáÿØŸäŸÑ", address: "ÿ¥ ÿ∞ŸáŸÜŸä ÿßŸÑÿ∂ÿßŸáÿ±", coordinates: [31.25963310156415, 30.065265893833285] },
            { name: "ÿ≥Ÿàÿ™Ÿäÿ±", address: "ÿ¥ÿ®ÿ±ÿß - ŸÖÿµÿ±", coordinates: [31.247359547591525, 30.083317529614053] },
            { name: "El Ezaby Pharmacy ‚Äì Koleyet El Banat", address: "1 Ahmed Tayseer St., Heliopolis, Cairo, Egypt", coordinates: [31.3300, 30.0866] },
            { name: "El Ezaby Pharmacy ‚Äì El Kholefa El Rashedeen", address: "1 El Sebaq St., El Merryland, Cairo, Egypt", coordinates: [31.3189, 30.0860] },
            { name: "El Ezaby Pharmacy ‚Äì El Korba", address: "19 Ibrahim St., El Korba, Cairo, Egypt", coordinates: [31.3189, 30.0860] },
            { name: "El Ezaby Pharmacy ‚Äì El Hegaz", address: "206 El Hegaz St., Cairo, Egypt", coordinates: [31.3300, 30.1000] },
            { name: "El Ezaby Pharmacy ‚Äì Saint Fatima", address: "161 El Nozha St., Saint Fatima, Cairo, Egypt", coordinates: [31.3200, 30.0900] },
            { name: "El Ezaby Pharmacy ‚Äì El Saraya Mall", address: "El Saraya Mall, Walley El Ahd St., Hadayek El Koba, Cairo, Egypt", coordinates: [31.2800, 30.1000] },
            { name: "El Ezaby Pharmacy ‚Äì Roxy", address: "9 El Qobba St., Roxy, Cairo, Egypt", coordinates: [31.3200, 30.0900] },
            { name: "El Ezaby Pharmacy ‚Äì Sheraton Buildings", address: "69 El Nasr St., Sheraton Buildings, Cairo, Egypt", coordinates: [31.3700, 30.1000] },
            { name: "El Ezaby Pharmacy ‚Äì El Nozha El Gadida", address: "36 Mohamed Kamel Hussein St., El Nozha El Gadida, Cairo, Egypt", coordinates: [31.3300, 30.1000] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City", address: "42 Mostafa El Nahhas St., Nasr City, Cairo, Egypt", coordinates: [31.3450, 30.0561] },
            { name: "El Ezaby Pharmacy ‚Äì El Maadi", address: "23 El Horyah Square, El Horyah, El Maadi, Cairo, Egypt", coordinates: [31.2615, 29.9627] },
            { name: "El Ezaby Pharmacy ‚Äì City Stars Mall", address: "City Stars Mall, Shop A, Omar Ibn El-Khattab St., Masaken Al Mohandesin, Nasr City, Cairo, Egypt", coordinates: [31.3460, 30.0738] },
            { name: "El Ezaby Pharmacy ‚Äì Hassan El Maamoun", address: "94 Hassan El Maamoun St., Al Manteqah as Sadesah, Nasr City, Cairo, Egypt", coordinates: [31.3442, 30.0595] },
            { name: "ÿµŸäÿØŸÑŸäÿ© ÿµŸÖŸàÿ¶ŸäŸÑ ŸàÿµŸÅŸä", address: "Arabia Cornish road - Adjacent to Hilton Plaza hotel, Hurghada, Red Sea Governorate 84300", coordinates: [33.8288267701919, 27.256164544374663] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 3", address: "42 Mostafa El Nahas St., Al Manteqah as Sadesah, Nasr City, Cairo, Egypt", coordinates: [31.3450, 30.0561] },
            { name: "El Ezaby Pharmacy ‚Äì El-Maadi Branch 2", address: "23 El Horyah Square, El Horyah, El-Maadi, Cairo, Egypt", coordinates: [31.2615, 29.9627] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 4", address: "City Stars Mall, Shop A, Omar Ibn El-Khattab St., Masaken Al Mohandesin, Nasr City, Cairo, Egypt", coordinates: [31.3460, 30.0738] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 5", address: "94 Hassan El Maamoun St., Al Manteqah as Sadesah, Nasr City, Cairo, Egypt", coordinates: [31.3442, 30.0595] },
            { name: "El Ezaby Pharmacy ‚Äì 5th Settlement Branch", address: "Akhnaton St., Silver Stars Mall, Shop 9, Ground Floor, 5th Settlement, New Cairo, Egypt", coordinates: [31.4310, 30.0185] },
            { name: "El Ezaby Pharmacy ‚Äì Shubra Branch", address: "156 Shubra St., El Sahel, Cairo, Egypt", coordinates: [31.2465, 30.0910] },
            { name: "El Ezaby Pharmacy ‚Äì Madinaty Branch", address: "12th St., Madinaty Buildings Area B1, Cairo, Egypt", coordinates: [31.6730, 30.0617] },
            { name: "El Ezaby Pharmacy ‚Äì West El Balad Branch 3", address: "Talaat Harb Sq., Downtown, Cairo, Egypt", coordinates: [31.2385, 30.0478] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 6", address: "Nozha St., 8 Saudi Buildings, Cairo, Egypt", coordinates: [31.3300, 30.0730] },
            { name: "El Ezaby Pharmacy ‚Äì El-Rehab Branch 2", address: "Ahmed Ben Hanbal St., Rehab Mall, Area for Home Services, Shop 51, 52, Rehab City, Cairo, Egypt", coordinates: [31.4912, 30.0591] },
            { name: "El Ezaby Pharmacy ‚Äì West El Balad Branch 4", address: "185 Ramses St., Daher, Cairo, Egypt", coordinates: [31.2478, 30.0625] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 5", address: "Airport Rd., Cairo Airport, Departure Terminal, Travel Hall 1, Heliopolis, Cairo, Egypt", coordinates: [31.4054, 30.1219] },
            { name: "El Ezaby Pharmacy ‚Äì Ein Shams Branch", address: "136 Salim Al Awal St., Ein Shams, Cairo, Egypt", coordinates: [31.2870, 30.1275] },
            { name: "El Ezaby Pharmacy ‚Äì Kasr Al Ainy Branch", address: "23 El Amin Sami St., Kasr Al Ainy, Cairo, Egypt", coordinates: [31.2357, 30.0345] },
            { name: "El Ezaby Pharmacy ‚Äì El-Manial Branch", address: "69 Manial El Roda St., Pasha Sq., Cairo, Egypt", coordinates: [31.2310, 30.0275] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi Branch 3", address: "516 Corniche El Nil, Shop G, Ground Floor, Cairo, Egypt", coordinates: [31.2257, 29.9553] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 6", address: "132 El-Nozha St., Triumph Vet Clinic, El Nozha, Cairo, Egypt", coordinates: [31.3305, 30.0915] },
            { name: "El Ezaby Pharmacy ‚Äì Cairo Festival Branch", address: "Cairo Festival Mall, Unit 2 078, Ring Rd., Al Hay Al Asher, Cairo, Egypt", coordinates: [31.4085, 30.0300] },
            { name: "El Ezaby Pharmacy ‚Äì Al Hay Al Asher Branch", address: "21 Ahmed El-Zomor St., Al Hay Al Asher, Nasr City, Cairo, Egypt", coordinates: [31.3500, 30.0500] },
            { name: "El Ezaby Pharmacy ‚Äì Helwan Branch", address: "Omar Ibn Abd El-Aziz St., Helwan El Qebleya, Helwan, Cairo, Egypt", coordinates: [31.3000, 29.8410] },
            { name: "El Ezaby Pharmacy ‚Äì El Sherouk City Branch", address: "Shuhada Rd., Sky Plaza Mall, Shop A, El Sherouk City, Cairo, Egypt", coordinates: [31.1956, 30.3301] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis", address: "1 Ahmed Tayseer St., Heliopolis, Cairo, Egypt", coordinates: [31.3300, 30.0866] },
            { name: "El Ezaby Pharmacy ‚Äì El Korba", address: "19 Ibrahim St., El Korba, Cairo, Egypt", coordinates: [31.3189, 30.0860] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City", address: "42 Mostafa El Nahhas St., Nasr City, Cairo, Egypt", coordinates: [31.3450, 30.0561] },
            { name: "El Ezaby Pharmacy ‚Äì Downtown", address: "Ramsis Sq., inside Mahattet Misr Mall, 1st Floor, Shop 104A, Cairo, Egypt", coordinates: [31.2461, 30.0626] },
            { name: "El Ezaby Pharmacy ‚Äì Al Rehab City", address: "Phase 3, inside Rehab Mall 2, Ground Floor, Shop 4, Cairo, Egypt", coordinates: [31.4910, 30.0595] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek", address: "36 Mohamed Kamel Hussein St., Zamalek, Cairo, Egypt", coordinates: [31.2150, 30.0660] },
            { name: "El Ezaby Pharmacy ‚Äì El Manyal", address: "123 Abdel Aziz Al Saoud St., El Manyal, Cairo, Egypt", coordinates: [31.2250, 30.0225] },
            { name: "El Ezaby Pharmacy ‚Äì Shoubra", address: "El Moassasa Sq., in front of Shoubra El Khaima 1st Police Station, Cairo, Egypt", coordinates: [31.2600, 30.1250] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi", address: "36, El Hussein Sq., Commercial Market, in front of El Hussein Mosque, Cairo, Egypt", coordinates: [31.2350, 30.0475] },
            { name: "El Ezaby Pharmacy ‚Äì Mokattam", address: "13 Aly Sedqy St., Abbaseya Sq., beside Syndicate Of Applicators, Cairo, Egypt", coordinates: [31.2850, 30.0450] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi Branch 1", address: "50 El Maadi St., Maadi, Cairo, Egypt", coordinates: [31.2365, 29.9795] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek Branch 2", address: "25 Mohammed Mazhar St., Zamalek, Cairo, Egypt", coordinates: [31.2245, 30.0730] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 2", address: "16 El-Hay El Asher St., Heliopolis, Cairo, Egypt", coordinates: [31.2485, 30.1016] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 7", address: "9 Hassan El-Maaraf St., Nasr City, Cairo, Egypt", coordinates: [31.3530, 30.0620] },
            { name: "El Ezaby Pharmacy ‚Äì Downtown Branch 2", address: "30 Ramses St., Downtown, Cairo, Egypt", coordinates: [31.2370, 30.0450] },
            { name: "El Ezaby Pharmacy ‚Äì Mokattam Branch 2", address: "56 Taha Hussein St., Mokattam, Cairo, Egypt", coordinates: [31.2645, 30.0635] },
            { name: "El Ezaby Pharmacy ‚Äì El Korba Branch 2", address: "45 Ibrahim St., El Korba, Cairo, Egypt", coordinates: [31.2850, 30.0730] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 3", address: "34 El Zohour St., Heliopolis, Cairo, Egypt", coordinates: [31.2925, 30.1020] },
            { name: "El Ezaby Pharmacy ‚Äì Shoubra Branch 2", address: "43 Shoubra St., Cairo, Egypt", coordinates: [31.2680, 30.0990] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 8", address: "18 Abdel Moneim Riad St., Nasr City, Cairo, Egypt", coordinates: [31.3345, 30.0460] },
            { name: "El Ezaby Pharmacy ‚Äì El Manyal Branch 2", address: "25 El Manyal St., Cairo, Egypt", coordinates: [31.2200, 30.0235] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek Branch 3", address: "30 El Nadi St., Zamalek, Cairo, Egypt", coordinates: [ vendedor: [31.2320, 30.0665] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi Branch 2", address: "44 El Maadi St., Maadi, Cairo, Egypt", coordinates: [31.2200, 29.9800] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 4", address: "18 El Nasr St., Heliopolis, Cairo, Egypt", coordinates: [31.2790, 30.1180] },
            { name: "El Ezaby Pharmacy ‚Äì Cairo Festival City Branch", address: "Cairo Festival Mall, New Cairo, Egypt", coordinates: [31.4090, 30.0315] },
            { name: "El Ezaby Pharmacy ‚Äì Downtown Branch 3", address: "5 Talaat Harb St., Downtown, Cairo, Egypt", coordinates: [31.2375, 30.0455] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 9", address: "12 Khaled Ibn Al Walid St., Nasr City, Cairo, Egypt", coordinates: [31.3210, 30.0805] },
            { name: "El Ezaby Pharmacy ‚Äì Al Rehab City Branch", address: "Shop 102, Rehab Mall, Rehab City, Cairo, Egypt", coordinates: [31.4900, 30.0580] },
            { name: "El Ezaby Pharmacy ‚Äì Giza Branch", address: "12 El Haram St., Giza, Egypt", coordinates: [31.1410, 30.0067] },
            { name: "El Ezaby Pharmacy ‚Äì El Maadi Branch 1", address: "56 El Maadi St., Maadi, Cairo, Egypt", coordinates: [31.2270, 29.9805] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 10", address: "60 Al Salah Al Din St., Nasr City, Cairo, Egypt", coordinates: [31.3540, 30.0490] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek Branch 4", address: "10 El Zamalek St., Cairo, Egypt", coordinates: [31.2390, 30.0730] },
            { name: "El Ezaby Pharmacy ‚Äì El-Korba Branch 3", address: "7 Ibrahim St., El Korba, Cairo, Egypt", coordinates: [31.2950, 30.0700] },
            { name: "El Ezaby Pharmacy ‚Äì Mokattam Branch 3", address: "33 Mokattam St., Mokattam, Cairo, Egypt", coordinates: [31.2565, 30.0655] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 11", address: "14 Al Fardous St., Nasr City, Cairo, Egypt", coordinates: [31.3375, 30.0590] },
            { name: "El Ezaby Pharmacy ‚Äì Giza Branch 2", address: "23 Mohandeseen St., Giza, Egypt", coordinates: [31.2135, 30.0530] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 7", address: "21 El Sabt St., Heliopolis, Cairo, Egypt", coordinates: [31.2955, 30.1090] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi Branch 4", address: "16 Corniche El Nil, Maadi, Cairo, Egypt", coordinates: [31.2275, 29.9750] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 12", address: "35 Mostafa El Nahhas St., Nasr City, Cairo, Egypt", coordinates: [31.3480, 30.0605] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek Branch 5", address: "28 El Tahrir St., Zamalek, Cairo, Egypt", coordinates: [31.2300, 30.0625] },
            { name: "El Ezaby Pharmacy ‚Äì Mokattam Branch 4", address: "22 Mokattam St., Mokattam, Cairo, Egypt", coordinates: [31.2625, 30.0600] },
            { name: "El Ezaby Pharmacy ‚Äì Downtown Branch 4", address: "18 Mohamed Farid St., Downtown, Cairo, Egypt", coordinates: [31.2435, 30.0465] },
            { name: "El Ezaby Pharmacy ‚Äì Shubra Branch 3", address: "50 Shubra St., Cairo, Egypt", coordinates: [31.2605, 30.0980] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 13", address: "22 Teba St., Nasr City, Cairo, Egypt", coordinates: [31.3570, 30.0655] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 8", address: "10 El Horyah St., Heliopolis, Cairo, Egypt", coordinates: [31.2770, 30.1120] },
            { name: "El Ezaby Pharmacy ‚Äì Giza Branch 3", address: "15 Ahmed Orabi St., Giza, Egypt", coordinates: [31.2075, 30.0345] },
            { name: "El Ezaby Pharmacy ‚Äì Mokattam Branch 5", address: "45 Mokattam St., Mokattam, Cairo, Egypt", coordinates: [31.2695, 30.0730] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi Branch 5", address: "60 Maadi St., Maadi, Cairo, Egypt", coordinates: [31.2345, 29.9790] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek Branch 6", address: "12 Taha Hussein St., Zamalek, Cairo, Egypt", coordinates: [31.2255, 30.0635] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 14", address: "30 Salah El Din St., Nasr City, Cairo, Egypt", coordinates: [31.3360, 30.0730] },
            { name: "El Ezaby Pharmacy ‚Äì El Manyal Branch 3", address: "15 Manial St., El Manyal, Cairo, Egypt", coordinates: [31.2200, 30.0235] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 9", address: "10 El Maadi St., Heliopolis, Cairo, Egypt", coordinates: [31.2950, 30.1010] },
            { name: "El Ezaby Pharmacy ‚Äì Shoubra Branch 4", address: "120 Shoubra St., Cairo, Egypt", coordinates: [31.2650, 30.1020] },
            { name: "El Ezaby Pharmacy ‚Äì Downtown Mall", address: "Downtown Mall, 1st Floor, Cairo, Egypt", coordinates: [31.2275, 30.0430] },
            { name: "El Ezaby Pharmacy ‚Äì New Cairo Branch", address: "Cairo Festival City, New Cairo, Egypt", coordinates: [31.4065, 30.0455] },
            { name: "El Ezaby Pharmacy ‚Äì Dokki Branch", address: "5 El-Basateen St., Dokki, Giza, Egypt", coordinates: [31.2125, 30.0400] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi Branch 6", address: "76 Corniche El Nil, Maadi, Cairo, Egypt", coordinates: [31.2320, 29.9765] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 10", address: "El Horyah St., Heliopolis, Cairo, Egypt", coordinates: [31.2905, 30.0995] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek Branch 7", address: "12 Taha Hussein St., Zamalek, Cairo, Egypt", coordinates: [31.2255, 30.0635] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 15", address: "5 El Sayeda Aisha St., Nasr City, Cairo, Egypt", coordinates: [31.3585, 30.0625] },
            { name: "El Ezaby Pharmacy ‚Äì Shubra Branch 5", address: "85 Shubra St., Cairo, Egypt", coordinates: [31.2610, 30.0970] },
            { name: "El Ezaby Pharmacy ‚Äì Mokattam Branch 6", address: "25 Mokattam St., Mokattam, Cairo, Egypt", coordinates: [31.2580, 30.0665] },
            { name: "El Ezaby Pharmacy ‚Äì Giza Branch 4", address: "45 Giza St., Giza, Egypt", coordinates: [31.2075, 30.0345] },
            { name: "El Ezaby Pharmacy ‚Äì Maadi Branch 7", address: "100 Maadi St., Maadi, Cairo, Egypt", coordinates: [31.2400, 29.9815] },
            { name: "El Ezaby Pharmacy ‚Äì Nasr City Branch 16", address: "15 Hassan El Maamoun St., Nasr City, Cairo, Egypt", coordinates: [31.3405, 30.0575] },
            { name: "El Ezaby Pharmacy ‚Äì Heliopolis Branch 11", address: "Salah El Din St., Heliopolis, Cairo, Egypt", coordinates: [31.3155, 30.1090] },
            { name: "El Ezaby Pharmacy ‚Äì Giza Branch 5", address: "10 Mohandeseen St., Giza, Egypt", coordinates: [31.2155, 30.0545] },
            { name: "El Ezaby Pharmacy ‚Äì Zamalek Branch 8", address: "30 El Zamalek St., Zamalek, Cairo, Egypt", coordinates: [31.2265, 30.0750] }
        ];

        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [31.314732, 30.103183], // Default to Cairo, adjust as needed
            zoom: 12,
            pitch: 45,
            bearing: -17.6,
        });

        const branchList = document.getElementById('branch-list');
        const searchInput = document.getElementById('search');
        const chainFilter = document.getElementById('chain-filter');
        const nearestBranchDiv = document.getElementById('nearest-branch');
        const loadingDiv = document.getElementById('loading');
        const errorDiv = document.getElementById('error');
        const toggleThemeBtn = document.getElementById('toggle-theme');
        const sidebar = document.getElementById('sidebar');
        const container = document.getElementById('container');
        const sidebarHeader = document.getElementById('sidebar-header');

        let userLocation = null;
        let markers = [];
        let isSidebarCollapsed = false;
        let isDragging = false;
        let startY = 0;
        let startHeight = 0;

        // Populate chain filter
        const chains = [...new Set(branches.map(branch => {
            if (branch.name.includes("El Ezaby")) return "El Ezaby Pharmacy";
            if (branch.name.includes("Doss")) return "Doss Pharmacy";
            if (branch.name.includes("ÿ™ŸàŸÜ ÿ™ŸàŸÜ")) return "ÿ™ŸàŸÜ ÿ™ŸàŸÜ";
            return branch.name.split(" ")[0];
        }))].sort();
        chains.forEach(chain => {
            const option = document.createElement('option');
            option.value = chain;
            option.textContent = chain;
            chainFilter.appendChild(option);
        });

        // Add markers (lighter green location pin)
        function addMarkers(filteredBranches = branches) {
            markers.forEach(marker => marker.remove());
            markers = filteredBranches.map(branch => {
                return new mapboxgl.Marker({ className: 'mapboxgl-marker' })
                    .setLngLat(branch.coordinates)
                    .setPopup(new mapboxgl.Popup().setHTML(`
                        <span style="color: #000000;"><strong>${branch.name}</strong><br>${branch.address}<br><a href="https://www.google.com/maps?q=${branch.coordinates[1]},${branch.coordinates[0]}" target="_blank" style="color: #000000;">View on Google Maps</a></span>
                    `))
                    .addTo(map);
            });
        }

        // Update branch list
        function updateBranchList(branchesToShow) {
            branchList.innerHTML = '';
            branchesToShow.forEach((branch, index) => {
                const branchItem = document.createElement('div');
                branchItem.className = 'branch';
                branchItem.innerHTML = `
                    <h3>${branch.name}</h3>
                    <p>${branch.address}</p>
                    <p>Distance: ${branch.distance ? branch.distance.toFixed(2) + ' km' : 'N/A'}</p>
                    <button onclick="openDirections('${branch.coordinates[1]},${branch.coordinates[0]}')">Directions</button>
                `;
                branchItem.addEventListener('click', () => {
                    map.flyTo({ center: branch.coordinates, zoom: 15, speed: 1.2, curve: 1.4 });
                    // Close any existing popup before opening a new one
                    markers.forEach(m => m.getPopup().remove());
                    markers[index].togglePopup(); // Open the popup for the corresponding marker
                    // Collapse the sidebar on mobile
                    if (window.innerWidth <= 768) { // Check if on mobile
                        isSidebarCollapsed = true;
                        sidebar.classList.add('collapsed');
                        container.classList.add('collapsed');
                        const headerHeight = document.getElementById('header').offsetHeight;
                        const collapsedHeight = 60; // Collapsed height
                        sidebar.style.height = `${window.innerHeight - headerHeight}px`;
                        map.style.height = `${window.innerHeight - headerHeight}px`; // Map takes full height
                        sidebar.style.transform = `translateY(calc(100% - ${collapsedHeight}px))`;
                    }
                });
                branchList.appendChild(branchItem);
            });
        }

        // Filter branches
        function filterBranches() {
            const query = searchInput.value.toLowerCase();
            const selectedChain = chainFilter.value;
            let filtered = branches;

            if (selectedChain !== 'all') {
                filtered = branches.filter(branch => {
                    if (selectedChain === "El Ezaby Pharmacy") return branch.name.includes("El Ezaby");
                    if (selectedChain === "Doss Pharmacy") return branch.name.includes("Doss");
                    if (selectedChain === "ÿ™ŸàŸÜ ÿ™ŸàŸÜ") return branch.name.includes("ÿ™ŸàŸÜ ÿ™ŸàŸÜ");
                    return branch.name.startsWith(selectedChain);
                });
            }

            if (query) {
                filtered = filtered.filter(branch =>
                    branch.name.toLowerCase().includes(query) || branch.address.toLowerCase().includes(query)
                );
            }

            addMarkers(filtered);
            updateBranchList(filtered.map(branch => ({ ...branch, distance: null })));
        }

        // Geolocation
        function fetchUserLocation() {
            if (!navigator.geolocation) {
                showError('Geolocation not supported by your browser.');
                return;
            }
            navigator.geolocation.getCurrentPosition(
                position => {
                    userLocation = [position.coords.longitude, position.coords.latitude];
                    new mapboxgl.Marker({ color: '#81BC78' }) // Original green for user location
                        .setLngLat(userLocation)
                        .setPopup(new mapboxgl.Popup().setText('You are here!'))
                        .addTo(map);

                    const branchesWithDistances = branches.map(branch => ({
                        ...branch,
                        distance: turf.distance(turf.point(userLocation), turf.point(branch.coordinates))
                    })).sort((a, b) => a.distance - b.distance);

                    nearestBranchDiv.innerHTML = `Nearest: <strong>${branchesWithDistances[0].name}</strong> (${branchesWithDistances[0].distance.toFixed(2)} km)`;
                    map.flyTo({ center: branchesWithDistances[0].coordinates, zoom: 15, speed: 1.2, curve: 1.4 });
                    updateBranchList(branchesWithDistances);
                    addMarkers(branchesWithDistances);
                    loadingDiv.style.display = 'none';
                },
                () => showError('Please enable location services.')
            );
        }

        // Open Google Maps directions in a new tab
        function openDirections(coords) {
            window.open(`https://www.google.com/maps?q=${coords}`, '_blank');
        }

        // Dragging functionality for mobile
        let touchStartY = 0;
        let touchMoveY = 0;
        let isDraggingSidebar = false;

        sidebarHeader.addEventListener('touchstart', (e) => {
            isDraggingSidebar = true;
            touchStartY = e.touches[0].clientY;
            startHeight = sidebar.offsetHeight;
            sidebar.style.transition = 'none'; // Disable transition during drag for smooth movement
        });

        sidebarHeader.addEventListener('touchmove', (e) => {
            if (!isDraggingSidebar) return;
            touchMoveY = e.touches[0].clientY;
            const deltaY = touchStartY - touchMoveY;
            const headerHeight = document.getElementById('header').offsetHeight;
            const maxHeight = window.innerHeight - headerHeight; // Full height minus header
            const minHeight = 60; // Minimum height when collapsed
            
            // Calculate new transform value
            let newTranslateY = deltaY;
            newTranslateY = Math.max(0, Math.min(newTranslateY, maxHeight - minHeight));
            
            sidebar.style.transform = `translateY(${newTranslateY}px)`;
        });

        sidebarHeader.addEventListener('touchend', () => {
            if (!isDraggingSidebar) return;
            isDraggingSidebar = false;

            // Re-enable transitions for smooth snapping
            sidebar.style.transition = 'transform 0.3s ease';

            const headerHeight = document.getElementById('header').offsetHeight;
            const maxHeight = window.innerHeight - headerHeight; // Full height minus header
            const minHeight = 60; // Minimum height when collapsed
            const threshold = maxHeight / 2; // Threshold to decide whether to expand or collapse

            // Calculate current translateY from the transform style
            const transformValue = sidebar.style.transform.match(/translateY\(([^)]+)\)/);
            const currentTranslateY = transformValue ? parseFloat(transformValue[1]) : 0;

            if (currentTranslateY < threshold) {
                // Expand to full height
                sidebar.style.height = `${maxHeight}px`;
                sidebar.style.transform = `translateY(0)`;
                isSidebarCollapsed = false;
                sidebar.classList.remove('collapsed');
                container.classList.remove('collapsed');
            } else {
                // Collapse to minimum height
                sidebar.style.height = `${maxHeight}px`; // Keep full height for content
                sidebar.style.transform = `translateY(calc(100% - ${minHeight}px))`;
                isSidebarCollapsed = true;
                sidebar.classList.add('collapsed');
                container.classList.add('collapsed');
            }
        });

        // Voice search
        if ('webkitSpeechRecognition' in window) {
            const recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            document.getElementById('search-icon').addEventListener('click', () => {
                recognition.start();
            });
            recognition.onresult = event => {
                searchInput.value = event.results[0][0].transcript;
                filterBranches();
            };
        }

        // Event listeners
        searchInput.addEventListener('input', filterBranches);
        chainFilter.addEventListener('change', filterBranches);
        toggleThemeBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            toggleThemeBtn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
            map.setStyle(document.body.classList.contains('dark-mode') ? 'mapbox://styles/mapbox/dark-v10' : 'mapbox://styles/mapbox/streets-v11');
        });

        // Error handling
        function showError(message) {
            loadingDiv.style.display = 'none';
            errorDiv.style.display = 'block';
            errorDiv.textContent = message;
        }

        // Initialize
        map.on('load', () => {
            addMarkers();
            fetchUserLocation();
            map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');
        });

        // Adjust heights on window resize to handle dynamic viewport changes
        window.addEventListener('resize', () => {
            const headerHeight = document.getElementById('header').offsetHeight;
            const maxHeight = window.innerHeight - headerHeight;
            const minHeight = 60;

            if (isSidebarCollapsed) {
                sidebar.style.height = `${maxHeight}px`;
                sidebar.style.transform = `translateY(calc(100% - ${minHeight}px))`;
                map.style.height = `${window.innerHeight - headerHeight}px`;
            } else {
                sidebar.style.height = `${maxHeight}px`;
                sidebar.style.transform = `translateY(0)`;
                map.style.height = `${window.innerHeight - headerHeight}px`;
            }
        });
    </script>
</body>
</html>
